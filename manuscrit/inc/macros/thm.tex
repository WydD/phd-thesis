%\usepackage[nocut,thickness=1.5pt, hskip=-1.5em, vskip=0pt, leftmargin=.5em]{thmbox}
\usepackage{caption}

\definecolor{deficolor}{RGB}{224,255,224}
\definecolor{propcolor}{RGB}{234,244,255}
\definecolor{thmcolor}{RGB}{255,224,224}
\definecolor{corocolor}{RGB}{255,250,224}
\definecolor{hypcolor}{RGB}{224,224,224}

\DeclareCaptionTextFormat{spaced}{#1}
\newlength{\thmsize}
\def\chapterarabic#1{\thesection.\arabic{#1}}
%% THMBOX
% Nouveau style thmbox
% #1 = nom
% #2 = label
% #3 = style (S - M)
\def\newthmtype#1#2#3{
        \DeclareCaptionFormat*{#1label}{\hspace{1.5em}{\ifx#3S\it\else\bf\fi ##1}\hfill \phantom{p}  {\bf ##3}}\floatstyle{plaintop}
        \newfloat{#1float}{ht}{#1toc}[chapter]\floatname{#1float}{#2}
	\expandafter\def\csname the#1float\endcsname{\chapterarabic{#1float}}
        \captionsetup[#1float]{position=top,aboveskip=0pt,format=#1label,textformat=spaced}
	\newenvironment{#1}[1][]
		{ 
        \begin{#1float}[!ht]%
  \caption{##1}\vspace{-0.7em}\raggedleft%
                    \let\BODY\undefined%
                    \setlength{\thmsize}{\linewidth}%
                    \addtolength{\thmsize}{-6em}%
                    \newsavebox{\BODY}% Box storage
                    \begin{lrbox}{\BODY}% Start capturing the input 
                        \phantom{m}\par \begin{minipage}{\thmsize}%
                        \vskip 1em%
                }
		{\par\phantom{m} \end{minipage}%
                    \end{lrbox}%
                    \noindent\fbox{\fcolorbox{black}{#1color}{\usebox{\BODY}\hspace{1em}}}%
                \end{#1float}}
}
\newthmtype{defi}{Définition}{L}
\newthmtype{lem}{Lemme}{S}
\newthmtype{thm}{Théorème}{M}
\newthmtype{hyp}{Hypothèse}{M}
\newthmtype{prop}{Proposition}{S}
\newthmtype{method}{Méthode}{S}
\newthmtype{coro}{Corollaire}{S}
\def\examplename{Exemple}

\def\examplecounter{examplect}
\newcounter{examplect}[chapter]
\newenvironment{example}[1][\examplename]{%
	\renewcommand{\examplename}{Exemple \refstepcounter{examplect}\chapterarabic{examplect}}
	\begin{absexample}}{\end{absexample}}
\newenvironment{absexample}[1][\examplename]{\vspace{1em}%
  \par\smallbreak%
  \noindent\textbf{#1\, :} \relax}{\vspace{1em}}
%  \let\demo=\comment
%  \let\enddemo=\endcomment
\newenvironment{demo}{
	\renewcommand{\examplename}{Démonstration}
	\begin{absexample} $\rhd$ }{ \hfill $\lhd$ \end{absexample}}

\newenvironment{eqndemo}{\begin{displaymath}\begin{array}{rcll}}{\end{array}\end{displaymath}}
\def\demodetail#1{& \;\text{#1}}
%\newcount\democt
%\newsavebox{\saveddemo}
%\newsavebox{\tmpdemo}
%\def\testsbox{\global\sbox}
%\newcommand{\blabla}{\multido{0+1}{\the\democt}{\fbox{\usebox{\csname dembox\the\democt\endcsname}}}}
%\renewenvironment{demo}{\begin{lrbox}{\tmpdemo}\begin{minipage}{\linewidth}}{\end{minipage}\end{lrbox}
%	\noexpand\newsavebox\csname dembox\the\democt\endcsname\relax
%	\expandafter\testsbox\noexpand\csname dembox\the\democt\endcsname{\usebox{\tmpdemo}}}

\newcounter{rmqct}
\def\rmq{}
\renewenvironment{rmq}{%
	\par\smallbreak
	\list{\hspace\labelsep\underline{\textit{Remarque}}\,:}{%
		\leftmargin=\parindent%
		\labelwidth=\parindent}%
		\item\relax}{%
		\endlist}
		
